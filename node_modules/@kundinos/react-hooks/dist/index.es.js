import{useRef as e,useCallback as r,useEffect as n,useState as t}from"react";const c={current:{}},o=(t,o,u,s)=>{const i=e(!1),d=e(s),a=r((()=>{return"object"==typeof(e=t)&&e.hasOwnProperty("current")?t.current:t;var e}),[t]),l=r((()=>a()===window?window:document),[a]),m=r((e=>e===window?"window":"document"),[]),w=r((e=>{const r=m(e.target);c.current[r][e.type].forEach((n=>{"document"!==r||n.elem!==document?n.elem===e.target&&n.listener(e):n.listener(e)}))}),[m]),h=r((()=>{const e=a(),r=l(),n=m(r);c.current[n]||(c.current[n]={}),c.current[n][o]||(c.current[n][o]=[]);const t=c.current[n];t[o].push({elem:e,listener:u}),1===t[o].length&&r.addEventListener(o,w,d.current)}),[l,a,m,w,u,o]),p=r((()=>{const e=a(),r=l(),n=m(r),t=c.current[n];t&&t[o]&&t[o].length>0&&(c.current[n][o]=t[o].filter((r=>null!==e&&r.elem!==e))),t&&t[o]&&0!==t[o].length||r.removeEventListener(o,w)}),[l,a,m,w,o]);n((()=>{const e=a();i.current||"object"==typeof d.current&&d.current.initial&&(i.current=!0,u.bind(e,null)())}),[a,u,d]),n((()=>(h(),p)),[h,p])},u=(e,r,n)=>o(document,e,r,n);function s(n={}){const{disabled:t,handleEvent:c}=n,o=e(null),s=r((e=>{const r=e.target;t||o.current&&!o.current.contains(r)&&c&&c(e)}),[t,c]);return u("click",s),o}const i=(t,c)=>{const o=e(null),u=e(),s=r((()=>{clearInterval(u.current),"function"==typeof o.current&&o.current()}),[]);return n((()=>(null===c||(u.current=setInterval((()=>{o.current=t()}),c)),s)),[t,c,s]),{resetInterval:s}};function d(e){if("number"==typeof e)return e;const r=36e5;return{millisecond:1,second:1e3,minute:6e4,hour:r,day:864e5}[e]}const a=(e={})=>{const r=e.every||"second",[c,o]=t(new Date),[u,s]=t(d(r));return i((()=>{o(new Date)}),u),n((()=>{s(d(r))}),[r]),c},l=r=>{const c=e(void 0),[o,u]=t(r);return n((()=>{c.current=o}),[o]),[o,u,c.current]},m=(t,c)=>{const o=e(null),u=e(),s=e(!1),i=r((()=>{clearTimeout(u.current),"function"==typeof o.current&&(o.current(),o.current=null)}),[]),d=r((()=>{u.current=setTimeout((()=>{o.current=t(),s.current=!0}),c)}),[t,c]),a=r((()=>{s.current=!1,i(),d()}),[i,d]);return n((()=>null===c?i():(s.current||d(),i)),[c,i,d]),{reset:i,repeat:a}},w=(n={})=>{const{onIdle:c,onWakeUp:o}=n,[s,i]=t(!1),d=e(n.timeout||3e3),a=e(),l=r((e=>{a.current.reset(),s||(i(!0),c&&c(e))}),[s,c]),w=r((e=>{a.current.repeat(),s&&(i(!1),o&&o(e))}),[s,o]),h=r((e=>{"hidden"===document.visibilityState?l(e):w(e)}),[l,w]);return a.current=m(l,d.current),u("visibilitychange",h),u("click",w),u("keydown",w),u("mousemove",w),u("scroll",w),s},h=[{event:"onKeyDown"},{event:"onKeyUp"},{event:"onKeyPress"},{codes:["Escape"],event:"onEscape"},{codes:["Tab"],event:"onTab"},{codes:["ArrowLeft"],event:"onArrowLeft"},{codes:["ArrowRight"],event:"onArrowRight"},{codes:["ArrowUp"],event:"onArrowUp"},{codes:["ArrowDown"],event:"onArrowDown"},{codes:["ArrowLeft","KeyA"],event:"onLeft"},{codes:["ArrowRight","KeyD"],event:"onRight"},{codes:["ArrowUp","KeyW"],event:"onUp"},{codes:["ArrowDown","KeyS"],event:"onDown"},{codes:["Space"],event:"onSpace"}],p=e=>{const n=r((r=>{h.forEach((n=>{e[n.event]&&(n.codes&&!n.codes.includes(r.code)||e[n.event](r))}))}),[e]);u("keydown",n),u("keypress",n),u("keyup",n)};function v(e){n((()=>{const r=Object.entries(e).map((([e,r])=>{const n=window.matchMedia(e);return n.matches&&r(n),n.addEventListener("change",r),n}));return()=>{r.forEach((r=>{const n=e[r.media];r.removeEventListener("change",n)}))}}),[e])}function f(e,c){const[o,u]=t(!1),s=r((e=>{u(e.matches),c&&c({matches:e.matches,media:e.media})}),[c]);return n((()=>{const r=window.matchMedia(e);return u(r.matches),r.addEventListener("change",s),()=>r.removeEventListener("change",s)}),[s,e]),o}const g=()=>{const[e,n]=t(null),c=r((e=>{let r=e.media.includes("dark")?"dark":"light";e.matches||(r="dark"===r?"light":"dark"),n(r)}),[]);return v({"(prefers-color-scheme: dark)":c,"(prefers-color-scheme: light)":c}),{theme:e,isDark:e&&"dark"===e,isLight:e&&"light"===e}},y=()=>{const[e,r]=t([]);return n((()=>{r(window.navigator.languages)}),[]),e},k=()=>{const[e,n]=t("no-preference"),c=r((({media:e,matches:r})=>{"(prefers-reduced-motion: reduce)"===e&&n(r?"reduce":"no-preference"),"(prefers-reduced-motion: no-preference)"===e&&n(r?"no-preference":"reduce")}),[]);return v({"(prefers-reduced-motion: reduce)":c,"(prefers-reduced-motion: no-preference)":c}),e},A=()=>{const{theme:e}=g();return{colorScheme:e,languages:y(),reducedMotion:k()}},E=(e,r,n)=>o(window,e,r,n),L=(e,r)=>E("resize",e,r),b=(n,t)=>{const c=e({x:0,y:0}),o=r((()=>{const e={x:window.scrollX,y:window.scrollY};n({previous:c.current,current:e}),c.current=e}),[n]);return E("scroll",o,t)},D=(e=!1)=>{const[n,c]=t(e);return[n,r((()=>c((e=>!e))),[])]};export{c as store,s as useClickOutside,a as useCurrentDate,u as useDocumentEvent,l as useFullState,w as useIdle,i as useInterval,p as useKeyboardEvents,v as useMediaQueries,f as useMediaQuery,o as useNativeEvent,A as usePrefers,g as usePrefersColorScheme,y as usePrefersLanguages,k as usePrefersReducedMotion,b as useScroll,m as useTimeout,D as useToggle,E as useWindowEvent,L as useWindowResize};
